<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PyQt5中使用QWebChannel和内嵌网页进行js交互 | yuchanns&#39;Atelier</title>
    <meta name="description" content="focus on python|php">
    <link rel="icon" href="/yuchanns.png">
  <meta name="google-site-verification" content="h0GK-apopUhINJJe5Jp3XopZswk6EK_JQT_fVMrs6A0">
  <meta name="baidu-site-verification" content="OeVj0fzw4S">
    
    <link rel="preload" href="/assets/css/0.styles.eb8afa4a.css" as="style"><link rel="preload" href="/assets/js/app.f1298f72.js" as="script"><link rel="preload" href="/assets/js/3.cd7d6ac4.js" as="script"><link rel="preload" href="/assets/js/18.a95bab7b.js" as="script"><link rel="prefetch" href="/assets/js/1.1516f943.js"><link rel="prefetch" href="/assets/js/10.0d42dcc2.js"><link rel="prefetch" href="/assets/js/11.0f58cf83.js"><link rel="prefetch" href="/assets/js/12.7aabf4e0.js"><link rel="prefetch" href="/assets/js/13.10474817.js"><link rel="prefetch" href="/assets/js/14.d0809dde.js"><link rel="prefetch" href="/assets/js/15.d43c7e25.js"><link rel="prefetch" href="/assets/js/16.9edcbcca.js"><link rel="prefetch" href="/assets/js/17.2e08000f.js"><link rel="prefetch" href="/assets/js/19.88e29e11.js"><link rel="prefetch" href="/assets/js/20.1376d87e.js"><link rel="prefetch" href="/assets/js/21.0fe3f19e.js"><link rel="prefetch" href="/assets/js/22.3c5a2a49.js"><link rel="prefetch" href="/assets/js/23.3eb72fcb.js"><link rel="prefetch" href="/assets/js/24.a91e9467.js"><link rel="prefetch" href="/assets/js/25.c0a6bc69.js"><link rel="prefetch" href="/assets/js/26.b6899417.js"><link rel="prefetch" href="/assets/js/27.b51f60a4.js"><link rel="prefetch" href="/assets/js/28.792179b8.js"><link rel="prefetch" href="/assets/js/29.2d6289f9.js"><link rel="prefetch" href="/assets/js/4.b7305242.js"><link rel="prefetch" href="/assets/js/5.05b6ad67.js"><link rel="prefetch" href="/assets/js/6.b1a2f38f.js"><link rel="prefetch" href="/assets/js/7.ebfb88b5.js"><link rel="prefetch" href="/assets/js/8.f9ac094a.js"><link rel="prefetch" href="/assets/js/9.52d65113.js">
    <link rel="stylesheet" href="/assets/css/0.styles.eb8afa4a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-meteorlxy"><header class="header" data-v-2db1e33a><div data-v-9292c008 data-v-2db1e33a><nav class="navbar" data-v-9292c008><div class="container" data-v-9292c008><a href="/" class="router-link-active" data-v-9292c008><span class="navbar-site-name" data-v-9292c008>
          yuchanns'Atelier
        </span></a> <div class="navbar-toggler" data-v-9292c008><svg class="icon" style="font-size:1.2em;" data-v-9292c008 data-v-9292c008><title data-v-9292c008 data-v-9292c008>menu</title><use xlink:href="#icon-menu" data-v-9292c008 data-v-9292c008></use></svg></div> <div class="navbar-links" data-v-9292c008><a href="/" class="navbar-link" data-v-9292c008>
            Home
          </a><a href="/posts/" class="navbar-link router-link-active" data-v-9292c008>
            Posts
          </a><a href="/snippets/" class="navbar-link" data-v-9292c008>
            Snippets
          </a><a href="/awesome/" class="navbar-link" data-v-9292c008>
            Awesome
          </a></div></div></nav> <div class="navbar-holder" style="display:none;" data-v-9292c008></div></div> <div class="banner" data-v-66d98992 data-v-2db1e33a data-v-2db1e33a><div class="container" data-v-66d98992><div class="center" data-v-66d98992><h1 data-v-66d98992 data-v-2db1e33a>
          PyQt5中使用QWebChannel和内嵌网页进行js交互
        </h1></div></div></div></header> <div class="container clearfix show-aside" data-v-226a4f67 data-v-226a4f67><main class="main" data-v-226a4f67><div class="post" data-v-226a4f67 data-v-226a4f67><section class="post-meta main-div" data-v-0afc19fc><section class="post-date clearfix" data-v-0afc19fc><span class="create-date" data-v-0afc19fc>
      发布时间 : 2018-11-10
    </span> <span class="update-date" data-v-0afc19fc>
      最后修改 : Invalid Date
    </span></section> <section class="post-links" data-v-0afc19fc><a href="/posts/2018/10/09/delay-in-php.html" class="post-link" data-v-0afc19fc>
      上一篇 : php延时任务
    </a> <a href="/posts/2018/11/18/thermal-print-with-qprinter.html" class="post-link" data-v-0afc19fc>
      下一篇 : PyQt5中使用Qprinter打印热敏小票
    </a></section></section> <article class="main-div"><div class="content default"><p>项目上需要将网页内嵌到客户端可执行程序上使用。以前同事通常是使用C#的WinFrom解决，不过这次却因为兼容性问题（WinForm内核是IE7，不懂C#不知道怎么修改），不支持大部分BootStrap样式。于是我就用PyQt5的QWebEngineView写了个简单客户端代替。样式支持了，但是却遇到一个问题，网页有打印需求，调用js的</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>而QWebEngineView却无法接收到打印请求作出反应。
经过查询资料和网友的提醒之后，我决定用QWebChannel来解决这个问题。
<strong>注：由于在查阅过程中没有及时保存参考来源，所以这里就不一一贴出参考的文章链接，请见谅</strong></p> <p>以下放出demo：</p> <h3 id="python端代码"><a href="#python端代码" aria-hidden="true" class="header-anchor">#</a> python端代码</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#! /usr/bin/env</span>
<span class="token comment"># -*- coding: utf-8 -*-</span>
<span class="token comment"># webview.py</span>


<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QApplication
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> QObject<span class="token punctuation">,</span> pyqtSlot<span class="token punctuation">,</span> QUrl
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtWebChannel <span class="token keyword">import</span> QWebChannel
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtWebEngineWidgets <span class="token keyword">import</span> QWebEngineView
<span class="token keyword">import</span> sys


<span class="token keyword">class</span> <span class="token class-name">Print</span><span class="token punctuation">(</span>QObject<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># pyqtSlot，网络上大多将其翻译为槽。作用是接收网页发起的信号</span>
    @pyqtSlot<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">,</span> result<span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">)</span> 
    <span class="token keyword">def</span> <span class="token function">print</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span>  <span class="token comment"># 对接收到的内容进行处理，比如调用打印机进行打印等等。此处略去，只在bash中显示接收到的消息</span>
        <span class="token keyword">return</span> content


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    browser <span class="token operator">=</span> QWebEngineView<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 新增一个浏览器引擎</span>
    browser<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">'QWebChannel交互Demo'</span><span class="token punctuation">)</span>
    browser<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token number">900</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span>
    channel <span class="token operator">=</span> QWebChannel<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 增加一个通信中需要用到的频道</span>
    printer <span class="token operator">=</span> Print<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 通信过程中需要使用到的功能类</span>
    channel<span class="token punctuation">.</span>registerObject<span class="token punctuation">(</span><span class="token string">'printer'</span><span class="token punctuation">,</span> printer<span class="token punctuation">)</span>  <span class="token comment"># 将功能类注册到频道中，注册名可以任意，但将在网页中作为标识</span>
    browser<span class="token punctuation">.</span>page<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setWebChannel<span class="token punctuation">(</span>channel<span class="token punctuation">)</span>  <span class="token comment"># 在浏览器中设置该频道</span>
    url_string <span class="token operator">=</span> <span class="token string">&quot;file:///python/python/index.html&quot;</span>  <span class="token comment"># 内置的网页地址，此处我采用的是本地的。远程同样可以使用。</span>
    browser<span class="token punctuation">.</span>load<span class="token punctuation">(</span>QUrl<span class="token punctuation">(</span>url_string<span class="token punctuation">)</span><span class="token punctuation">)</span>
    browser<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span>exec_<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="网页端代码"><a href="#网页端代码" aria-hidden="true" class="header-anchor">#</a> 网页端代码</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- index.html --&gt;</span>
<span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>QWebChannel交互Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sendMes()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>发送消息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>mes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 引入qwebchannel.js，才能与QWebEngineView进行交互 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>qwebchannel.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
    window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">QWebChannel</span><span class="token punctuation">(</span>qt<span class="token punctuation">.</span>webChannelTransport<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>channel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            window<span class="token punctuation">.</span>printer<span class="token operator">=</span> channel<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>printer<span class="token punctuation">;</span>  <span class="token comment">// 此处channel.objects.printer中的printer就是上文提到的功能类注册的标识名</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">sendMes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 调用python端的功能类的方法执行操作</span>
        printer<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'你收到一条网页发送的消息！'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>以上就是解决方案。事实上交互一词还包含了从QWebEngineView向网页发送信号的部分，因为暂时没用到，所以demo上没有写出。后面我再补上。</p> <h3 id="附：qwebchannel-js库内容"><a href="#附：qwebchannel-js库内容" aria-hidden="true" class="header-anchor">#</a> 附：qwebchannel.js库内容</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/****************************************************************************
**
** Copyright (C) 2016 The Qt Company Ltd.
** Contact: http://www.qt.io/licensing/
**
** This file is part of the examples of the Qt Toolkit.
**
** $QT_BEGIN_LICENSE:BSD$
** You may use this file under the terms of the BSD license as follows:
**
** &quot;Redistribution and use in source and binary forms, with or without
** modification, are permitted provided that the following conditions are
** met:
**   * Redistributions of source code must retain the above copyright
**     notice, this list of conditions and the following disclaimer.
**   * Redistributions in binary form must reproduce the above copyright
**     notice, this list of conditions and the following disclaimer in
**     the documentation and/or other materials provided with the
**     distribution.
**   * Neither the name of The Qt Company Ltd nor the names of its
**     contributors may be used to endorse or promote products derived
**     from this software without specific prior written permission.
**
**
** THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
** &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
** LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
** A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
** OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
** SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
** LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
** DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
** THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
** (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
** OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.&quot;
**
** $QT_END_LICENSE$
**
****************************************************************************/</span>
<span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> QWebChannelMessageTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    signal<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    propertyUpdate<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    init<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    idle<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    debug<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    invokeMethod<span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
    connectToSignal<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
    disconnectFromSignal<span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
    setProperty<span class="token punctuation">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
    response<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">QWebChannel</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>transport<span class="token punctuation">,</span> initCallback<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> transport <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> transport<span class="token punctuation">.</span>send <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;The QWebChannel expects a transport object with a send function and onmessage callback property.&quot;</span> <span class="token operator">+</span>
                      <span class="token string">&quot; Given is: transport: &quot;</span> <span class="token operator">+</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span>transport<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;, transport.send: &quot;</span> <span class="token operator">+</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span>transport<span class="token punctuation">.</span>send<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> channel <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>transport <span class="token operator">=</span> transport<span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">send</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        channel<span class="token punctuation">.</span>transport<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>transport<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">var</span> data <span class="token operator">=</span> message<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> data <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> QWebChannelMessageTypes<span class="token punctuation">.</span>signal<span class="token punctuation">:</span>
                channel<span class="token punctuation">.</span><span class="token function">handleSignal</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> QWebChannelMessageTypes<span class="token punctuation">.</span>response<span class="token punctuation">:</span>
                channel<span class="token punctuation">.</span><span class="token function">handleResponse</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> QWebChannelMessageTypes<span class="token punctuation">.</span>propertyUpdate<span class="token punctuation">:</span>
                channel<span class="token punctuation">.</span><span class="token function">handlePropertyUpdate</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token punctuation">:</span>
                console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;invalid message received:&quot;</span><span class="token punctuation">,</span> message<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>execCallbacks <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>execId <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">exec</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// if no callback is given, send directly</span>
            channel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>channel<span class="token punctuation">.</span>execId <span class="token operator">===</span> Number<span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// wrap</span>
            channel<span class="token punctuation">.</span>execId <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Cannot exec message with property id: &quot;</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        data<span class="token punctuation">.</span>id <span class="token operator">=</span> channel<span class="token punctuation">.</span>execId<span class="token operator">++</span><span class="token punctuation">;</span>
        channel<span class="token punctuation">.</span>execCallbacks<span class="token punctuation">[</span>data<span class="token punctuation">.</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> callback<span class="token punctuation">;</span>
        channel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>objects <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">handleSignal</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">var</span> object <span class="token operator">=</span> channel<span class="token punctuation">.</span>objects<span class="token punctuation">[</span>message<span class="token punctuation">.</span>object<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            object<span class="token punctuation">.</span><span class="token function">signalEmitted</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>signal<span class="token punctuation">,</span> message<span class="token punctuation">.</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;Unhandled signal: &quot;</span> <span class="token operator">+</span> message<span class="token punctuation">.</span>object <span class="token operator">+</span> <span class="token string">&quot;::&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">.</span>signal<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">handleResponse</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>message<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Invalid response message received: &quot;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        channel<span class="token punctuation">.</span>execCallbacks<span class="token punctuation">[</span>message<span class="token punctuation">.</span>id<span class="token punctuation">]</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">delete</span> channel<span class="token punctuation">.</span>execCallbacks<span class="token punctuation">[</span>message<span class="token punctuation">.</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">handlePropertyUpdate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> message<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> data <span class="token operator">=</span> message<span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> object <span class="token operator">=</span> channel<span class="token punctuation">.</span>objects<span class="token punctuation">[</span>data<span class="token punctuation">.</span>object<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                object<span class="token punctuation">.</span><span class="token function">propertyUpdate</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>signals<span class="token punctuation">,</span> data<span class="token punctuation">.</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;Unhandled property update: &quot;</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>object <span class="token operator">+</span> <span class="token string">&quot;::&quot;</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>signal<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        channel<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token punctuation">:</span> QWebChannelMessageTypes<span class="token punctuation">.</span>idle<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">debug</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        channel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token punctuation">:</span> QWebChannelMessageTypes<span class="token punctuation">.</span>debug<span class="token punctuation">,</span> data<span class="token punctuation">:</span> message<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    channel<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token punctuation">:</span> QWebChannelMessageTypes<span class="token punctuation">.</span>init<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> objectName <span class="token keyword">in</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> object <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QObject</span><span class="token punctuation">(</span>objectName<span class="token punctuation">,</span> data<span class="token punctuation">[</span>objectName<span class="token punctuation">]</span><span class="token punctuation">,</span> channel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// now unwrap properties, which might reference other registered objects</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> objectName <span class="token keyword">in</span> channel<span class="token punctuation">.</span>objects<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            channel<span class="token punctuation">.</span>objects<span class="token punctuation">[</span>objectName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">unwrapProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>initCallback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">initCallback</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        channel<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token punctuation">:</span> QWebChannelMessageTypes<span class="token punctuation">.</span>idle<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">QObject</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> data<span class="token punctuation">,</span> webChannel<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>__id__ <span class="token operator">=</span> name<span class="token punctuation">;</span>
    webChannel<span class="token punctuation">.</span>objects<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

    <span class="token comment">// List of callbacks that get invoked upon signal emission</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>__objectSignals__ <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// Cache of all properties, updated when a notify signal is emitted</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>__propertyCache__ <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> object <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

    <span class="token comment">// ----------------------------------------------------------------------</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">unwrapQObject</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>response <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// support list of objects</span>
            <span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> response<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                ret<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> object<span class="token punctuation">.</span><span class="token function">unwrapQObject</span><span class="token punctuation">(</span>response<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response
            <span class="token operator">||</span> <span class="token operator">!</span>response<span class="token punctuation">[</span><span class="token string">&quot;__QObject*__&quot;</span><span class="token punctuation">]</span>
            <span class="token operator">||</span> response<span class="token punctuation">.</span>id <span class="token operator">===</span> undefined<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> response<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">var</span> objectId <span class="token operator">=</span> response<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>webChannel<span class="token punctuation">.</span>objects<span class="token punctuation">[</span>objectId<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> webChannel<span class="token punctuation">.</span>objects<span class="token punctuation">[</span>objectId<span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Cannot unwrap unknown QObject &quot;</span> <span class="token operator">+</span> objectId <span class="token operator">+</span> <span class="token string">&quot; without data.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">var</span> qObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QObject</span><span class="token punctuation">(</span> objectId<span class="token punctuation">,</span> response<span class="token punctuation">.</span>data<span class="token punctuation">,</span> webChannel <span class="token punctuation">)</span><span class="token punctuation">;</span>
        qObject<span class="token punctuation">.</span>destroyed<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>webChannel<span class="token punctuation">.</span>objects<span class="token punctuation">[</span>objectId<span class="token punctuation">]</span> <span class="token operator">===</span> qObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">delete</span> webChannel<span class="token punctuation">.</span>objects<span class="token punctuation">[</span>objectId<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token comment">// reset the now deleted QObject to an empty {} object</span>
                <span class="token comment">// just assigning {} though would not have the desired effect, but the</span>
                <span class="token comment">// below also ensures all external references will see the empty map</span>
                <span class="token comment">// NOTE: this detour is necessary to workaround QTBUG-40021</span>
                <span class="token keyword">var</span> propertyNames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> propertyName <span class="token keyword">in</span> qObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    propertyNames<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> idx <span class="token keyword">in</span> propertyNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">delete</span> qObject<span class="token punctuation">[</span>propertyNames<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// here we are already initialized, and thus must directly unwrap the properties</span>
        qObject<span class="token punctuation">.</span><span class="token function">unwrapProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> qObject<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">unwrapProperties</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> propertyIdx <span class="token keyword">in</span> object<span class="token punctuation">.</span>__propertyCache__<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            object<span class="token punctuation">.</span>__propertyCache__<span class="token punctuation">[</span>propertyIdx<span class="token punctuation">]</span> <span class="token operator">=</span> object<span class="token punctuation">.</span><span class="token function">unwrapQObject</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span>__propertyCache__<span class="token punctuation">[</span>propertyIdx<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">addSignal</span><span class="token punctuation">(</span>signalData<span class="token punctuation">,</span> isPropertyNotifySignal<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">var</span> signalName <span class="token operator">=</span> signalData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> signalIndex <span class="token operator">=</span> signalData<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        object<span class="token punctuation">[</span>signalName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
            connect<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Bad callback given to connect to signal &quot;</span> <span class="token operator">+</span> signalName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                object<span class="token punctuation">.</span>__objectSignals__<span class="token punctuation">[</span>signalIndex<span class="token punctuation">]</span> <span class="token operator">=</span> object<span class="token punctuation">.</span>__objectSignals__<span class="token punctuation">[</span>signalIndex<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                object<span class="token punctuation">.</span>__objectSignals__<span class="token punctuation">[</span>signalIndex<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isPropertyNotifySignal <span class="token operator">&amp;&amp;</span> signalName <span class="token operator">!==</span> <span class="token string">&quot;destroyed&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// only required for &quot;pure&quot; signals, handled separately for properties in propertyUpdate</span>
                    <span class="token comment">// also note that we always get notified about the destroyed signal</span>
                    webChannel<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                        type<span class="token punctuation">:</span> QWebChannelMessageTypes<span class="token punctuation">.</span>connectToSignal<span class="token punctuation">,</span>
                        object<span class="token punctuation">:</span> object<span class="token punctuation">.</span>__id__<span class="token punctuation">,</span>
                        signal<span class="token punctuation">:</span> signalIndex
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            disconnect<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Bad callback given to disconnect from signal &quot;</span> <span class="token operator">+</span> signalName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                object<span class="token punctuation">.</span>__objectSignals__<span class="token punctuation">[</span>signalIndex<span class="token punctuation">]</span> <span class="token operator">=</span> object<span class="token punctuation">.</span>__objectSignals__<span class="token punctuation">[</span>signalIndex<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> idx <span class="token operator">=</span> object<span class="token punctuation">.</span>__objectSignals__<span class="token punctuation">[</span>signalIndex<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>idx <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Cannot find connection of signal &quot;</span> <span class="token operator">+</span> signalName <span class="token operator">+</span> <span class="token string">&quot; to &quot;</span> <span class="token operator">+</span> callback<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                object<span class="token punctuation">.</span>__objectSignals__<span class="token punctuation">[</span>signalIndex<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isPropertyNotifySignal <span class="token operator">&amp;&amp;</span> object<span class="token punctuation">.</span>__objectSignals__<span class="token punctuation">[</span>signalIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// only required for &quot;pure&quot; signals, handled separately for properties in propertyUpdate</span>
                    webChannel<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                        type<span class="token punctuation">:</span> QWebChannelMessageTypes<span class="token punctuation">.</span>disconnectFromSignal<span class="token punctuation">,</span>
                        object<span class="token punctuation">:</span> object<span class="token punctuation">.</span>__id__<span class="token punctuation">,</span>
                        signal<span class="token punctuation">:</span> signalIndex
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Invokes all callbacks for the given signalname. Also works for property notify callbacks.
     */</span>
    <span class="token keyword">function</span> <span class="token function">invokeSignalCallbacks</span><span class="token punctuation">(</span>signalName<span class="token punctuation">,</span> signalArgs<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">var</span> connections <span class="token operator">=</span> object<span class="token punctuation">.</span>__objectSignals__<span class="token punctuation">[</span>signalName<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>connections<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            connections<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                callback<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> signalArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">propertyUpdate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>signals<span class="token punctuation">,</span> propertyMap<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// update property cache</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> propertyIndex <span class="token keyword">in</span> propertyMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> propertyValue <span class="token operator">=</span> propertyMap<span class="token punctuation">[</span>propertyIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
            object<span class="token punctuation">.</span>__propertyCache__<span class="token punctuation">[</span>propertyIndex<span class="token punctuation">]</span> <span class="token operator">=</span> propertyValue<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> signalName <span class="token keyword">in</span> signals<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Invoke all callbacks, as signalEmitted() does not. This ensures the</span>
            <span class="token comment">// property cache is updated before the callbacks are invoked.</span>
            <span class="token function">invokeSignalCallbacks</span><span class="token punctuation">(</span>signalName<span class="token punctuation">,</span> signals<span class="token punctuation">[</span>signalName<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">signalEmitted</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>signalName<span class="token punctuation">,</span> signalArgs<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">invokeSignalCallbacks</span><span class="token punctuation">(</span>signalName<span class="token punctuation">,</span> signalArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">addMethod</span><span class="token punctuation">(</span>methodData<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">var</span> methodName <span class="token operator">=</span> methodData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> methodIdx <span class="token operator">=</span> methodData<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        object<span class="token punctuation">[</span>methodName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> callback<span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span>
                    callback <span class="token operator">=</span> arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span>
                    args<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            webChannel<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> QWebChannelMessageTypes<span class="token punctuation">.</span>invokeMethod<span class="token punctuation">,</span>
                <span class="token string">&quot;object&quot;</span><span class="token punctuation">:</span> object<span class="token punctuation">.</span>__id__<span class="token punctuation">,</span>
                <span class="token string">&quot;method&quot;</span><span class="token punctuation">:</span> methodIdx<span class="token punctuation">,</span>
                <span class="token string">&quot;args&quot;</span><span class="token punctuation">:</span> args
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>response <span class="token operator">!==</span> undefined<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">var</span> result <span class="token operator">=</span> object<span class="token punctuation">.</span><span class="token function">unwrapQObject</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">bindGetterSetter</span><span class="token punctuation">(</span>propertyInfo<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">var</span> propertyIndex <span class="token operator">=</span> propertyInfo<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> propertyName <span class="token operator">=</span> propertyInfo<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> notifySignalData <span class="token operator">=</span> propertyInfo<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">// initialize property cache with current value</span>
        <span class="token comment">// NOTE: if this is an object, it is not directly unwrapped as it might</span>
        <span class="token comment">// reference other QObject that we do not know yet</span>
        object<span class="token punctuation">.</span>__propertyCache__<span class="token punctuation">[</span>propertyIndex<span class="token punctuation">]</span> <span class="token operator">=</span> propertyInfo<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>notifySignalData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>notifySignalData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// signal name is optimized away, reconstruct the actual name</span>
                notifySignalData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> propertyName <span class="token operator">+</span> <span class="token string">&quot;Changed&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">addSignal</span><span class="token punctuation">(</span>notifySignalData<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span> propertyName<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            configurable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token keyword">get</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> propertyValue <span class="token operator">=</span> object<span class="token punctuation">.</span>__propertyCache__<span class="token punctuation">[</span>propertyIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>propertyValue <span class="token operator">===</span> undefined<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// This shouldn't happen</span>
                    console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;Undefined value in property cache for property \&quot;&quot;</span> <span class="token operator">+</span> propertyName <span class="token operator">+</span> <span class="token string">&quot;\&quot; in object &quot;</span> <span class="token operator">+</span> object<span class="token punctuation">.</span>__id__<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">return</span> propertyValue<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">set</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> undefined<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;Property setter for &quot;</span> <span class="token operator">+</span> propertyName <span class="token operator">+</span> <span class="token string">&quot; called with undefined value!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                object<span class="token punctuation">.</span>__propertyCache__<span class="token punctuation">[</span>propertyIndex<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
                webChannel<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> QWebChannelMessageTypes<span class="token punctuation">.</span>setProperty<span class="token punctuation">,</span>
                    <span class="token string">&quot;object&quot;</span><span class="token punctuation">:</span> object<span class="token punctuation">.</span>__id__<span class="token punctuation">,</span>
                    <span class="token string">&quot;property&quot;</span><span class="token punctuation">:</span> propertyIndex<span class="token punctuation">,</span>
                    <span class="token string">&quot;value&quot;</span><span class="token punctuation">:</span> value
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// ----------------------------------------------------------------------</span>

    data<span class="token punctuation">.</span>methods<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>addMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>

    data<span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>bindGetterSetter<span class="token punctuation">)</span><span class="token punctuation">;</span>

    data<span class="token punctuation">.</span>signals<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>signal<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">addSignal</span><span class="token punctuation">(</span>signal<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> name <span class="token keyword">in</span> data<span class="token punctuation">.</span>enums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        object<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>enums<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//required for use with nodejs</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> module <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
        QWebChannel<span class="token punctuation">:</span> QWebChannel
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div></article> <section class="post-meta main-div" data-v-0afc19fc><section class="post-date clearfix" data-v-0afc19fc><span class="create-date" data-v-0afc19fc>
      发布时间 : 2018-11-10
    </span> <span class="update-date" data-v-0afc19fc>
      最后修改 : Invalid Date
    </span></section> <section class="post-links" data-v-0afc19fc><a href="/posts/2018/10/09/delay-in-php.html" class="post-link" data-v-0afc19fc>
      上一篇 : php延时任务
    </a> <a href="/posts/2018/11/18/thermal-print-with-qprinter.html" class="post-link" data-v-0afc19fc>
      下一篇 : PyQt5中使用Qprinter打印热敏小票
    </a></section></section> <div id="post-comments" class="main-div"><!----></div></div></main> <aside class="aside" data-v-226a4f67><div class="info-card main-div" data-v-acfd4c20 data-v-226a4f67><div class="info-card-header" data-v-acfd4c20><img src="https://avatars3.githubusercontent.com/u/25029451" alt="yuchanns" class="info-avatar" data-v-acfd4c20></div> <div class="info-card-body" data-v-acfd4c20><section class="info-nickname" data-v-acfd4c20>
      yuchanns
    </section> <section class="info-desc" data-v-acfd4c20>A non professional programmer which attempt to be professional</section> <section class="info-contact" data-v-acfd4c20><section data-v-acfd4c20><span title="Shenzhen, China" data-v-acfd4c20 data-v-acfd4c20><svg class="icon" style="font-size:1em;" data-v-acfd4c20 data-v-acfd4c20><title data-v-acfd4c20 data-v-acfd4c20>Shenzhen, China</title><use xlink:href="#icon-location" data-v-acfd4c20 data-v-acfd4c20></use></svg><span class="info-text" data-v-acfd4c20 data-v-acfd4c20>
          Shenzhen, China
        </span></span></section> <!----> <section data-v-acfd4c20><a href="mailto:airamusume@gmail.com" title="airamusume@gmail.com" data-v-acfd4c20 data-v-acfd4c20><svg class="icon" style="font-size:1em;" data-v-acfd4c20 data-v-acfd4c20><title data-v-acfd4c20 data-v-acfd4c20>airamusume@gmail.com</title><use xlink:href="#icon-email" data-v-acfd4c20 data-v-acfd4c20></use></svg><span class="info-text" data-v-acfd4c20 data-v-acfd4c20>
          airamusume@gmail.com
        </span></a></section></section></div> <div class="info-card-footer" data-v-acfd4c20><section class="info-sns clearfix" data-v-acfd4c20><a href="https://github.com/yuchanns" target="_blank" class="sns-link" data-v-acfd4c20><span title="GitHub: yuchanns" class="sns-icon" data-v-acfd4c20 data-v-acfd4c20><svg class="icon" style="font-size:1.5em;" data-v-acfd4c20 data-v-acfd4c20><title data-v-acfd4c20 data-v-acfd4c20>GitHub: yuchanns</title><use xlink:href="#icon-github" data-v-acfd4c20 data-v-acfd4c20></use></svg></span></a></section></div></div> <div class="post-nav-card main-div" style="position:relative;top:0;width:0px;" data-v-226a4f67><!----> <div class="post-nav-comments"><svg class="icon"><title>comment</title><use xlink:href="#icon-comment"></use></svg> <a href="/posts/2018/11/10/interaction-on-qwebchannel.html#post-comments">
      
    </a></div></div></aside></div> <footer class="footer" data-v-a7ec77da><p class="sns-links" data-v-a7ec77da><a href="https://github.com/yuchanns" target="_blank" class="sns-link" data-v-a7ec77da><span title="GitHub: yuchanns" class="sns-icon" data-v-a7ec77da data-v-a7ec77da><svg class="icon" style="font-size:25px;" data-v-a7ec77da data-v-a7ec77da><title data-v-a7ec77da data-v-a7ec77da>GitHub: yuchanns</title><use xlink:href="#icon-github" data-v-a7ec77da data-v-a7ec77da></use></svg></span></a></p> <p data-v-a7ec77da><span data-v-a7ec77da>Powered by </span> <a href="https://vuepress.vuejs.org" target="_blank" data-v-a7ec77da>
      Vuepress
    </a></p> <span id="busuanzi_container_site_pv" data-v-a7ec77da>你是第<span id="busuanzi_value_site_pv" data-v-a7ec77da></span>位访问者</span> <p data-v-a7ec77da><a href="http://beian.miit.gov.cn/" target="_blank" style="color: #666" data-v-a7ec77da>
        闽ICP备19005068号
    </a></p></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.f1298f72.js" defer></script><script src="/assets/js/3.cd7d6ac4.js" defer></script><script src="/assets/js/18.a95bab7b.js" defer></script>
  </body>
</html>
